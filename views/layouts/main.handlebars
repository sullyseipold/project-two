<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css">
  <link rel="stylesheet" href="/styles/styles.css" media="screen" title="no title" charset="utf-8">

  {{!-- firebase ui --}}
  <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

  {{!-- fonts --}}
  <link href="https://fonts.googleapis.com/css?family=Pacifico" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Comfortaa" rel="stylesheet">

  <title>Home Page</title>
</head>

<header>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">


    <form action="/" method="GET">
      <button type="submit" class="navbar-brand coolFont">

        <img src="/assets/photos/logo_transparent.png" width="30" height="30" class="d-inline-block align-top coolFont"
          alt="">
        Naybo
      </button>
    </form>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">

        <li class="nav-item coolFont2">
          <form action="/search" method="GET">
            <button type="submit" id="search" class="nav-link btn">Available Items</button>
          </form>
        </li>

        <li class="nav-item coolFont2">
          {{!-- this needs to be configed with this.id -- get db.User in html routes --}}
          <form action="/account" method="GET">
            <a id="account" class="nav-link btn">My Account</a>
          </form>

        </li>
        <li class="nav-item coolFont2">
          <form action="/add" method="GET">
            <button id="additem" class="nav-link btn">Add an Item</button>
          </form>
        </li>
        {{!-- <li class="nav-item">
          <a class="nav-link">Log Out</a>
        </li> --}}
      </ul>
    </div>
  </nav>
</header>

<body class="bg">
  {{{body}}}

  <script src="https://www.gstatic.com/firebasejs/5.9.3/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyApsUV2HbMuCDra-xjAYH0eOMht-9Cs_LA",
      authDomain: "naybo-93e66.firebaseapp.com",
      databaseURL: "https://naybo-93e66.firebaseio.com",
      projectId: "naybo-93e66",
      storageBucket: "naybo-93e66.appspot.com",
      messagingSenderId: "596833852567"
    };
    firebase.initializeApp(config);

    var user = firebase.auth().currentUser;
    var email, uid;

    if (user != null) {
      email = user.email;
      uid = user.uid;  // The user's ID, unique to the Firebase project. Do NOT use
      // this value to authenticate with your backend server, if
      // you have one. Use User.getToken() instead.
    }

    // Initialize the FirebaseUI Widget using Firebase.
    var ui = new firebaseui.auth.AuthUI(firebase.auth());


    var uiConfig = {
      callbacks: {
        signInSuccessWithAuthResult: function (authResult, redirectUrl) {
          // User successfully signed in.
          // Return type determines whether we continue the redirect automatically
          // or whether we leave that to developer to handle.
          return true;
        },
        uiShown: function () {
          // The widget is rendered.
          // Hide the loader.
          document.getElementById('loader').style.display = 'none';
        }
      },
      // Will use popup for IDP Providers sign-in flow instead of the default, redirect.
      signInFlow: 'popup',

      signInSuccessUrl: '/account;

      signInOptions: [
        // Leave the lines as is for the providers you want to offer your users.
        firebase.auth.EmailAuthProvider.PROVIDER_ID,
      ]

    };

    firebase.auth().onAuthStateChanged(function (user) {
      if (user) {
        console.log(user.uid);
        // User is signed in.
      } else {
        // No user is signed in.
      }
    });
    // The start method will wait until the DOM is loaded.
    ui.start('#firebaseui-auth-container', uiConfig);



  </script>
</body>

</html>